var products_JSON=[
    {
        "Id":"p01",
        "BrandId":"asia",
        "Type":"stand",
        "Pic":"../hình/hinh quat/D16028.png",
        "Name":"D16028-XV0",
        "Rating":4,
        "TotalRating":2,
        "Sizeofbladas":"40cm",
        "Power": "45W",
        "VoltageFrequency": "220V-50Hz",
        "Airflow": "77.5m3/min",
        "Eeratio": "1.80 (m3/min/W)",
        "Roundsperminute": 1200,
        "Numbeofspeeds": 3,
        "Switchtypes": "Rotation",
        "Price":75
    },
    {
        "Id":"p02",
        "BrandId":"asia",
        "Type":"stand",
        "Pic":"../hình/hinh quat/D16021.webp",
        "Name":"D16021",
        "Rating":4,
        "TotalRating":9,
        "Sizeofbladas":"40cm",
        "Power": "45W",
        "VoltageFrequency": "220V-50Hz",
        "Airflow": "77.5m3/min",
        "Eeratio": "1.80 (m3/min/W)",
        "Roundsperminute": 1200,
        "Numbeofspeeds": 3,
        "Switchtypes": "Rotation",
        "Price":75
    },
    {
        "Id":"p03",
        "BrandId":"asia",
        "Type":"slide",
        "Pic":"../hình/hinh quat/a16008.webp",
        "Name":"A16008",
        "Rating":4,
        "TotalRating":2,
        "Sizeofbladas":"40cm",
        "Power": "45W",
        "VoltageFrequency": "220V-50Hz",
        "Airflow": "77.5m3/min",
        "Eeratio": "1.80 (m3/min/W)",
        "Roundsperminute": 1200,
        "Numbeofspeeds": 3,
        "Switchtypes": "Rotation",
        "Price":75
    },
    {
        "Id":"p04",
        "BrandId":"asia",
        "Type":"slide",
        "Pic":"../hình/hinh quat/A16009-DV1.webp",
        "Name":"A16009-XV0",
        "Rating":4,
        "TotalRating":11,
        "Sizeofbladas":"40cm",
        "Power": "45W",
        "VoltageFrequency": "220V-50Hz",
        "Airflow": "77.5m3/min",
        "Eeratio": "1.80 (m3/min/W)",
        "Roundsperminute": 1200,
        "Numbeofspeeds": 3,
        "Switchtypes": "Rotation",
        "Price":70
    },
    {
        "Id":"p05",
        "BrandId":"asia",
        "Type":"slide",
        "Pic":"../hình/hinh quat/quat-lung-a16018.webp",
        "Name":"A16018-XV0",
        "Rating":4,
        "TotalRating":56,
        "Sizeofbladas":"40cm",
        "Power": "45W",
        "VoltageFrequency": "220V-50Hz",
        "Airflow": "77.5m3/min",
        "Eeratio": "1.80 (m3/min/W)",
        "Roundsperminute": 1200,
        "Numbeofspeeds": 3,
        "Switchtypes": "Rotation",
        "Price":70
    },
    {
        "Id":"p06",
        "BrandId":"asia",
        "Type":"stand",
        "Pic":"../hình/hinh quat/D18001.webp",
        "Name":"D18001-DV0",
        "Rating":2,
        "TotalRating":25,
        "Sizeofbladas":"40cm",
        "Power": "45W",
        "VoltageFrequency": "220V-50Hz",
        "Airflow": "77.5m3/min",
        "Eeratio": "1.80 (m3/min/W)",
        "Roundsperminute": 1200,
        "Numbeofspeeds": 3,
        "Switchtypes": "Rotation",
        "Price":75
    },
    {
        "Id":"p07",
        "BrandId":"asia",
        "Type":"stand",
        "Pic":"../hình/hinh quat/DTB1601-XV0_hot1.webp",
        "Name":"DTB1601-XV0",
        "Rating":4,
        "TotalRating":34,
        "Sizeofbladas":"40cm",
        "Power": "45W",
        "VoltageFrequency": "220V-50Hz",
        "Airflow": "77.5m3/min",
        "Eeratio": "1.80 (m3/min/W)",
        "Roundsperminute": 1200,
        "Numbeofspeeds": 3,
        "Switchtypes": "Rotation",
        "Price":25
    },
    {
        "Id":"p08",
        "BrandId":"asia",
        "Type":"stand",
        "Pic":"../hình/hinh quat/DTB1601-DV0.webp",
        "Name":"DTB1601-DV0",
        "Rating":4.5,
        "TotalRating":9,
        "Sizeofbladas":"40cm",
        "Power": "45W",
        "VoltageFrequency": "220V-50Hz",
        "Airflow": "77.5m3/min",
        "Eeratio": "1.80 (m3/min/W)",
        "Roundsperminute": 1200,
        "Numbeofspeeds": 3,
        "Switchtypes": "Rotation",
        "Price":30
    },
    {
        "Id":"p09",
        "BrandId":"asia",
        "Type":"wall",
        "Pic":"../hình/hinh quat/L16019-XV0.png",
        "Name":"L16019-XV0",
        "Rating":3.5,
        "TotalRating":8,
        "Sizeofbladas":"40cm",
        "Power": "45W",
        "VoltageFrequency": "220V-50Hz",
        "Airflow": "77.5m3/min",
        "Eeratio": "1.80 (m3/min/W)",
        "Roundsperminute": 1200,
        "Numbeofspeeds": 3,
        "Switchtypes": "Rotation",
        "Price":50
    },
    {
        "Id":"p10",
        "BrandId":"asia",
        "Type":"wall",
        "Pic":"../hình/hinh quat/L18002-1.png",
        "Name":"L18002-DV0",
        "Rating":4,
        "TotalRating":6,
        "Sizeofbladas":"40cm",
        "Power": "45W",
        "VoltageFrequency": "220V-50Hz",
        "Airflow": "77.5m3/min",
        "Eeratio": "1.80 (m3/min/W)",
        "Roundsperminute": 1200,
        "Numbeofspeeds": 3,
        "Switchtypes": "Rotation",
        "Price":26
    },
    {
        "Id":"p11",
        "BrandId":"asia",
        "Type":"box",
        "Pic":"../hình/hinh quat/QS1001-SV0.webp",
        "Name":"QS1001-SV0",
        "Rating":4,
        "TotalRating":4,
        "Sizeofbladas":"40cm",
        "Power": "45W",
        "VoltageFrequency": "220V-50Hz",
        "Airflow": "77.5m3/min",
        "Eeratio": "1.80 (m3/min/W)",
        "Roundsperminute": 1200,
        "Numbeofspeeds": 3,
        "Switchtypes": "Rotation",
        "Price":45
    },
    {
        "Id":"p12",
        "BrandId":"asia",
        "Type":"box",
        "Pic":"../hình/hinh quat/F16001-XV1.webp",
        "Name":"F16001-XV1",
        "Rating":5,
        "TotalRating":44,
        "Sizeofbladas":"40cm",
        "Power": "45W",
        "VoltageFrequency": "220V-50Hz",
        "Airflow": "77.5m3/min",
        "Eeratio": "1.80 (m3/min/W)",
        "Roundsperminute": 1200,
        "Numbeofspeeds": 3,
        "Switchtypes": "Rotation",
        "Price":60
    },
    {
        "Id":"p13",
        "BrandId":"asia",
        "Type":"desk",
        "Pic":"../hình/hinh quat/quat-ban-ASIAvina-B16001-XV1-2.png",
        "Name":"B16001-XV1",
        "Rating":4,
        "TotalRating":88,
        "Sizeofbladas":"40cm",
        "Power": "45W",
        "VoltageFrequency": "220V-50Hz",
        "Airflow": "77.5m3/min",
        "Eeratio": "1.80 (m3/min/W)",
        "Roundsperminute": 1200,
        "Numbeofspeeds": 3,
        "Switchtypes": "Rotation",
        "Price":50
    },
    {
        "Id":"p14",
        "BrandId":"asia",
        "Type":"celling",
        "Pic":"../hình/hinh quat/J56004-1.webp",
        "Name":"D16028-XV0",
        "Rating":4,
        "TotalRating":23,
        "Sizeofbladas":"40cm",
        "Power": "45W",
        "VoltageFrequency": "220V-50Hz",
        "Airflow": "77.5m3/min",
        "Eeratio": "1.80 (m3/min/W)",
        "Roundsperminute": 1200,
        "Numbeofspeeds": 3,
        "Switchtypes": "Rotation",
        "Price":50
    }
];

var res = '';
var res1 = '';
//get page url id
function getPageUrlId()
{
    var urlID = window.location.href;
    res = urlID.slice(-3);
    res1 = urlID.slice(-1);
    if(res1!='a'&&res1!='c'&&res1!='e'&&res1!='f')
    {
        res1='a';
    }
}

// All product 
var s = '';

    for (var v of products_JSON) {
        var isRating='';
        switch(v.Rating){
            case 1:
                isRating='<p>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star"></i>'+
                '<i style="color:red" class="bi bi-star"></i>'+
                '<i style="color:red" class="bi bi-star"></i>'+
                '<i style="color:red" class="bi bi-star"></i>'+
                '<i class="item-rating-total">'+v.TotalRating+'</i>'+
                '</p>';
                break;
            case 1.5:
                isRating='<p>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-half"></i>'+
                '<i style="color:red" class="bi bi-star"></i>'+
                '<i style="color:red" class="bi bi-star"></i>'+
                '<i style="color:red" class="bi bi-star"></i>'+
                '<i class="item-rating-total">'+v.TotalRating+'</i>'+
                '</p>';
                break;
            case 2:
                isRating='<p>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star"></i>'+
                '<i style="color:red" class="bi bi-star"></i>'+
                '<i style="color:red" class="bi bi-star"></i>'+
                '<i class="item-rating-total">'+v.TotalRating+'</i>'+
                '</p>';
                break;
            case 2.5:
                isRating='<p>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-half"></i>'+
                '<i style="color:red" class="bi bi-star"></i>'+
                '<i style="color:red" class="bi bi-star"></i>'+
                '<i class="item-rating-total">'+v.TotalRating+'</i>'+
                '</p>';
                break;
            case 3:
                isRating='<p>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star"></i>'+
                '<i style="color:red" class="bi bi-star"></i>'+
                '<i class="item-rating-total">'+v.TotalRating+'</i>'+
                '</p>';
                break;
            case 3.5:
                isRating='<p>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-half"></i>'+
                '<i style="color:red" class="bi bi-star"></i>'+
                '<i class="item-rating-total">'+v.TotalRating+'</i>'+
                '</p>';
                break;
            case 4:
                isRating='<p>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star"></i>'+
                '<i class="item-rating-total">'+v.TotalRating+'</i>'+
                '</p>';
                break;
            case 4.5:
                isRating='<p>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-half"></i>'+
                '<i class="item-rating-total">'+v.TotalRating+'</i>'+
                '</p>';
                break;
            case 5:
                isRating='<p>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i style="color:red" class="bi bi-star-fill"></i>'+
                '<i class="item-rating-total">'+v.TotalRating+'</i>'+
                '</p>';
                break;
        }
        s += '<div class="column '+v.Type+'">'+
            '<div class="content">'+
                '<a href="detail.html?key1='+v.Id+'"><img src="'+v.Pic+'" class="card-img-top img-thumbnail" alt="image"></a>'+           
                '<a href="#"><h5>'+v.Name+'</h5></a>'+            
                '<div class="item-rating">'+isRating+'</div>'+
                '<p class="card-text">$'+v.Price+'.00</p>'+
                '<div class="cart"><a href="html/productdetail.html" style="margin-right:90px" ><button style="padding:6px 10px;border:none;border-radius:3px;background-color:rgb(0,200,200);color:white;">View more..</button></a>'+
                '<a href="#" data-name="Asia D16028" data-price="75" class="add-to-cart btn btn-primary">Add to cart</a></div>'+
            '</div>'+
        '</div>';
    }
   
    $("#products").html(s);


    var shoppingCart = (function() {
        // =============================
        // Private methods and propeties
        // =============================
        cart = [];
        
        // Constructor
        function Item(name, price, count) {
          this.name = name;
          this.price = price;
          this.count = count;
        }
        
        // Save cart
        function saveCart() {
          sessionStorage.setItem('shoppingCart', JSON.stringify(cart));
        }
        
          // Load cart
        function loadCart() {
          cart = JSON.parse(sessionStorage.getItem('shoppingCart'));
        }
        if (sessionStorage.getItem("shoppingCart") != null) {
          loadCart();
        }
        
      
        // this is cart modal
        var obj = {};
        
        // Add to cart
        obj.addItemToCart = function(name, price, count) {
          for(var item in cart) {
            if(cart[item].name === name) {
              cart[item].count ++;
              saveCart();
              return;
            }
          }
          var item = new Item(name, price, count);
          cart.push(item);
          saveCart();
        }
        // Set count from item
        obj.setCountForItem = function(name, count) {
          for(var i in cart) {
            if (cart[i].name === name) {
              cart[i].count = count;
              break;
            }
          }
        };
        // Remove item from cart
        obj.removeItemFromCart = function(name) {
            for(var item in cart) {
              if(cart[item].name === name) {
                cart[item].count --;
                if(cart[item].count === 0) {
                  cart.splice(item, 1);
                }
                break;
              }
          }
          saveCart();
        }
      
        // Remove all items from cart
        obj.removeItemFromCartAll = function(name) {
          for(var item in cart) {
            if(cart[item].name === name) {
              cart.splice(item, 1);
              break;
            }
          }
          saveCart();
        }
      
        // Clear cart
        obj.clearCart = function() {
          cart = [];
          saveCart();
        }
      
        // Count cart 
        obj.totalCount = function() {
          var totalCount = 0;
          for(var item in cart) {
            totalCount += cart[item].count;
          }
          return totalCount;
        }
      
        // Total cart
        obj.totalCart = function() {
          var totalCart = 0;
          for(var item in cart) {
            totalCart += cart[item].price * cart[item].count;
          }
          return Number(totalCart.toFixed(2));
        }
      
        // List cart
        obj.listCart = function() {
          var cartCopy = [];
          for(i in cart) {
            item = cart[i];
            itemCopy = {};
            for(p in item) {
              itemCopy[p] = item[p];
      
            }
            itemCopy.total = Number(item.price * item.count).toFixed(2);
            cartCopy.push(itemCopy)
          }
          return cartCopy;
        }
      
        // cart : Array
        // Item : Object/Class
        // addItemToCart : Function
        // removeItemFromCart : Function
        // removeItemFromCartAll : Function
        // clearCart : Function
        // countCart : Function
        // totalCart : Function
        // listCart : Function
        // saveCart : Function
        // loadCart : Function
        return obj;
      })();
      
      
      // *****************************************
      // Triggers / Events
      // ***************************************** 
      // Add item
      $('.add-to-cart').click(function(event) {
        event.preventDefault();
        var name = $(this).data('name');
        var price = Number($(this).data('price'));
        shoppingCart.addItemToCart(name, price, 1);
        displayCart();
      });
      
      // Clear items
      $('.clear-cart').click(function() {
        shoppingCart.clearCart();
        displayCart();
      });
      
      
      function displayCart() {
        var cartArray = shoppingCart.listCart();
        var output = "";
        for(var i in cartArray) {
          output += "<tr>"
            + "<td>" + cartArray[i].name + "</td>" 
            + "<td>(" + cartArray[i].price + ")</td>"
            + "<td><div class='input-group'><button class='minus-item input-group-addon btn btn-primary' data-name=" + cartArray[i].name + ">-</button>"
            + "<input type='number' class='item-count form-control' data-name='" + cartArray[i].name + "' value='" + cartArray[i].count + "'>"
            + "<button class='plus-item btn btn-primary input-group-addon' data-name=" + cartArray[i].name + ">+</button></div></td>"
            + "<td><button class='delete-item btn btn-danger' data-name=" + cartArray[i].name + ">X</button></td>"
            + " = " 
            + "<td>" + cartArray[i].total + "</td>" 
            +  "</tr>";
        }
        $('.show-cart').html(output);
        $('.total-cart').html(shoppingCart.totalCart());
        $('.total-count').html(shoppingCart.totalCount());
      }
      
      // Delete item button
      
      $('.show-cart').on("click", ".delete-item", function(event) {
        var name = $(this).data('name')
        shoppingCart.removeItemFromCartAll(name);
        displayCart();
      })
      
      
      // -1
      $('.show-cart').on("click", ".minus-item", function(event) {
        var name = $(this).data('name')
        shoppingCart.removeItemFromCart(name);
        displayCart();
      })
      // +1
      $('.show-cart').on("click", ".plus-item", function(event) {
        var name = $(this).data('name')
        shoppingCart.addItemToCart(name);
        displayCart();
      })
      
      // Item count input
      $('.show-cart').on("change", ".item-count", function(event) {
         var name = $(this).data('name');
         var count = Number($(this).val());
        shoppingCart.setCountForItem(name, count);
        displayCart();
      });
      
      displayCart();
      


var brand='';
// show PRODUCTS detail
function productsDetail()
{
    var d='';
    var i=0;
    for (var v of products_JSON)
    {
        if(v.Id==res)
        {
            i++;
            $("#title").html(v.Name);

  d+=  ' <div class="hero">'+
    '        <div class="row pic1">'+
    '            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-5 pic2">'+
    ''+
    '                <div class="slider">'+
    '                    <div class="product">'+
    ''+
    '                        <img src="../hình/image-product/'+v.Name+'/'+v.Name+' (1).jpg" alt="" onclick="clickme(this)">\n'+
    '                        <img src="../hình/image-product/'+v.Name+'/'+v.Name+' (2).jpg" alt="" onclick="clickme(this)">\n'+
    '                        <img src="../hình/image-product/'+v.Name+'/'+v.Name+' (3).jpg" alt="" onclick="clickme(this)">\n'+
    '                    </div>'+
    '                    <div class="preview">'+
    '                    <img src="'+v.Pic+'" id="imagebox" alt="">'+
    '                    </div>'+
    '                </div>'+
    '            </div>'+
  
    '<div class="col-xs-12 col-sm-offset-2 col-sm-4 col-md-offset-2 col-md-6 col-lg-offset-3 col-lg-5">'+ '<span class="name">Name: </span>'+
    '<span class="small_name">'+v.Name+'</span><br>'+
    '<div class="price">Price:<span>$'+v.Price+'.00</span></div><br>'+
    '<h2>Infomation</h2>'+
    '<ul>'+
    ' <li>Size of blades: '+ v.Sizeofbladas+'</li>'+
   '  <li>power: '+ v.Power+'</li>'+
    ' <li>Voltage-Frequency: '+ v.VoltageFrequency+'</li>'+
   '  <li>Air flow: '+ v.Airflow+'</li>'+
  ' <li>E ration: '+ v.Eeratio+'</li>'+
   ' <li>Round per minute: '+ v.Roundsperminute+'</li>'+
    '<li>Number speeds: '+ v.Numbeofspeeds+'</li>'+
    ' <li>Switch types: '+ v.Switchtypes+'</li>'+
    '</ul>'+
    '<a href="../Download_infomation_of_fan/'+v.Name+'_infomations.docx" download><i class="bi bi-download">  Download infomations</i></a>'+
    '<a href="checkout.html"  class="add-to-cart btn btn-primary">Buy now</a>'+
'</div></div></div>' +
'  <ul class="nav nav-tabs">'+
'        <li class="nav-item">'+
'          <a class="nav-link active" data-toggle="tab" href="#home">Rating</a>'+
'        </li>'+
'        <li class="nav-item">'+
'          <a class="nav-link" data-toggle="tab" href="#menu1">Reviews</a>'+
'        </li>'+
'      </ul>'+    
'      <div class="tab-content">'+
'        <div id="home" class="container tab-pane active"><br>'+
'          <h3>Rating star product</h3>'+
'          <iframe src="rating.html" frameborder="0"></iframe>'+
'        </div>'+
'        <div id="menu1" class="container tab-pane fade"><br>'+
 
'          <h3>comment</h3>'+

'          <textarea name="" id="" cols="50" rows="10"></textarea>'+

'           <div><button type="submit" class="btn btn-primary"> send</button></div>'+
'        </div>'+
'      </div>'+
'    </div>'+
'  </div>'+
'</div>';
    brand = v.BrandId;     
        }                        
    }
    if(i==0)
    {
        d+='<h1 width="500px" height="500px" >Sorry ! Product not found <br><br><a href="brand.html">Click here to return to Brand page</a></h1>';
        $("#title").html("404 NOT FOUND");
    }
$("#get_data").html(d);
}
